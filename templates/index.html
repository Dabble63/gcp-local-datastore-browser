{% extends "base.html" %}

{% block title %}Datastore Browser{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <h1 class="mb-4">
            <i class="fas fa-database"></i> Datastore Browser
        </h1>
        <p class="lead">Browse and edit your Google Cloud Datastore entities running on the local emulator.</p>
    </div>
    <div class="col-md-4 text-end">
        <div class="card">
            <div class="card-body">
                <h6 class="card-title">Connection Info</h6>
                <small class="text-muted">
                    <i class="fas fa-server"></i> {{ request.environ.get('DATASTORE_EMULATOR_HOST', 'localhost:8081') }}<br>
                    <i class="fas fa-project-diagram"></i> <strong>{{ current_project }}</strong>
                </small>
            </div>
        </div>
    </div>
</div>

<hr>

{% if kinds %}
<div class="row">
    <div class="col-12">
        <h3 class="mb-3">
            <i class="fas fa-table"></i> Available Kinds/Tables
            <span class="badge bg-secondary">{{ kinds|length }}</span>
        </h3>
    </div>
</div>

<div class="row">
    {% for kind in kinds %}
    <div class="col-md-6 col-lg-4 mb-3">
        <div class="card kind-card h-100">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="fas fa-table text-primary"></i> {{ kind }}
                </h5>
                <p class="card-text text-muted">Entity kind: {{ kind }}</p>
                <div class="d-grid gap-2">
                    <a href="{{ url_for('browse_kind', kind_name=kind) }}" class="btn btn-primary">
                        <i class="fas fa-eye"></i> Browse
                    </a>
                    <a href="{{ url_for('new_entity', kind_name=kind) }}" class="btn btn-outline-success btn-sm">
                        <i class="fas fa-plus"></i> Add New
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-5">
    <div class="mb-4">
        <i class="fas fa-inbox text-muted" style="font-size: 4rem;"></i>
    </div>
    <h3 class="text-muted">No Entities Found</h3>
    <p class="text-muted">
        No entities were found in your datastore. Make sure:
    </p>
    <ul class="list-unstyled text-muted">
        <li><i class="fas fa-check"></i> The datastore emulator is running</li>
        <li><i class="fas fa-check"></i> You have entities in your datastore</li>
        <li><i class="fas fa-check"></i> The connection settings are correct</li>
    </ul>
    
    <div class="mt-4">
        <h5>Quick Start</h5>
        <p class="text-muted">To start the datastore emulator, run:</p>
        <code class="bg-light p-2 d-block">gcloud beta emulators datastore start --data-dir=./data</code>
    </div>
</div>
{% endif %}
{% endblock %}
